"use strict";define(["emitter","vector","field"],function(t,i,e){var n={canvas:void 0,ctx:void 0,centerX:void 0,centerY:void 0,emitters:[],drawQueue:[],updateQueue:[],fields:[],initEmitters:function(){var e=new t(this.canvas,this.ctx,this.fields,new i(this.centerX,this.centerY),i.fromAngle(0,2),Math.PI);this.emitters.push(e),this.drawQueue.push(e.draw.bind(e)),this.updateQueue.push(e.update.bind(e))},initFields:function(){var t=new e(this.ctx,new i(this.centerX+this.centerX/2,this.centerY),900);this.fields.push(t),this.drawQueue.push(t.draw.bind(t)),t=new e(this.ctx,new i(this.centerX-this.centerX/2,this.centerY),900),this.fields.push(t),this.drawQueue.push(t.draw.bind(t))},update:function(){this.updateQueue.forEach(function(t){t()})},draw:function(){this.drawQueue.forEach(function(t){t()})},animate:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.update(),this.draw(),window.requestAnimationFrame(this.animate.bind(this))},init:function(){console.log("controller inited"),this.canvas=document.querySelector("canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.centerX=this.canvas.width/2,this.centerY=this.canvas.height/2,this.ctx=this.canvas.getContext("2d"),this.initEmitters(),this.initFields(),this.animate()}};return n});